<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Acrolinx Scroll Into View Test Page</title>
  <script src="/bower_components/ckeditor/ckeditor.js"></script>
  <script src="/bower_components/tinymce/tinymce.js"></script>

  <script type="text/javascript" src="/bower_components/jquery/dist/jquery.js"></script>

  <link rel="stylesheet" href="../../style.css"/>

  <style>
    #sidebarContainer {
      position: fixed;
      height: 500px;;
      top: 0px;
      right: 0px;
    }
  </style>

  <script>

  </script>
</head>
<body>
<div id="sidebarContainer"></div>
<div id="app" style="width: 800px">
  <h1>Acrolinx - Scroll Into View - Test Page</h1>

  <pre id="errorMessage"></pre>
  <form>
    <div style="display: table;width: 100%">
      <div style="display: table-cell; width: 50%">
        <p>Normal Text (Editable div)</p>

        <div id="EditableDiv" contenteditable="true" spellcheck="false" style="max-height: 5em">
          editable div onee
          <br><br><br> <br><br><br>
          Endd
        </div>

      </div>
      <div style="display: table-cell">
        <p>Normal Text (TextArea)</p>
        <textarea id="textarea" style="width: 200px;height: 60px">Hellow world!</textarea>
      </div>
    </div>
    <p>CK Editor</p>
        <textarea name="CkEditor" id="editor_ck" rows="10" cols="40">
            This textt has more then a errorr.
        </textarea>
    <p>TinyMCE Editor</p>
        <textarea name="TinyEditor" id="editor_tinymce" rows="10" cols="40">
            This textt has more then a errorr.
        </textarea>
    <script>
      CKEDITOR.disableAutoInline = true;
      // Replace the <textarea id="editor1"> with a CKEditor
      // instance, using default configuration.
    </script>

    <div style="display: table;width: 100%">
      <div style="display: table-cell; width: 50%">
        <p>Normal Text (Editable div)</p>

        <div id="EditableDiv2" contenteditable="true" spellcheck="false" style="max-height: 5em">
          editable div twoo
          <br><br><br> <br><br><br>
          Endd
        </div>
      </div>
      <div style="display: table-cell">
        <p>Normal Text (TextArea)</p>
        <textarea id="textarea2" style="width: 200px;height: 60px">textarea twoo!</textarea>
      </div>
    </div>

  </form>
</div>

<script src="../config.js"></script>
<script type="module">
  import { AcrolinxPlugin, ContentEditableAdapter, InputAdapter, CKEditorAdapter, TinyMCEAdapter, MultiEditorAdapter } from 'https://unpkg.com/@acrolinx/sidebar-sdk/dist/index.js';

  function initAcrolinx() {

    function addScrollOffset(adapterConf) {
      return $.extend({}, adapterConf, {scrollOffsetY: 30});
    }

    //Init the main Acrolinx Plugin
    const acrolinxPlugin = new AcrolinxPlugin(window.basicConf);

    //A simple Adapter for a Editable Div
    const contentEditableAdapter = new ContentEditableAdapter(addScrollOffset({editorId: 'EditableDiv'}));
    const inputAdapter = new InputAdapter(addScrollOffset({editorId: 'textarea'}));
    const ckEditorAdapter = new CKEditorAdapter(addScrollOffset({editorId: 'editor_ck'}));
    const tinyMceAdapter = new TinyMCEAdapter(addScrollOffset({editorId: 'editor_tinymce'}));

    const contentEditableAdapter2 = new ContentEditableAdapter(addScrollOffset({editorId: 'EditableDiv2'}));
    const inputAdapter2 = new InputAdapter(addScrollOffset({editorId: 'textarea2'}));

    const multiAdapter = new MultiEditorAdapter();
    multiAdapter.addSingleAdapter(contentEditableAdapter);
    multiAdapter.addSingleAdapter(inputAdapter);
    multiAdapter.addSingleAdapter(ckEditorAdapter);
    multiAdapter.addSingleAdapter(tinyMceAdapter);

    multiAdapter.addSingleAdapter(contentEditableAdapter2);
    multiAdapter.addSingleAdapter(inputAdapter2);

    //Register one Element-Adapter to the main Acrolinx PLugin
    acrolinxPlugin.registerAdapter(multiAdapter);


    //Init Acrolinx Plugin.
    acrolinxPlugin.init();


    CKEDITOR.replace('editor_ck', {
      height: 50
    });

    tinymce.init({selector: "#editor_tinymce", height: 50});

    if (window.location.search.indexOf('innerScrollBar') >=0) {
      $('#app').css({
        height: '400px',
        overflow: 'auto',
        'margin-top': '200px'
      });
    }

  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initAcrolinx);
  } else {
    initAcrolinx();
  }

</script>

</body>
</html>
